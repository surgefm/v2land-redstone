{"version":3,"sources":["../api/services/AccessControlService/NewsAccessControl/getNewsRoles.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,0EAAsF;AAEtF,SAAS,iBAAiB,CAAC,MAAc;IACvC,OAAO,QAAQ,MAAM,EAAE,CAAC;AAC1B,CAAC;AAEM,MAAM,oBAAoB,GAAG,CAAC,MAAc,EAAE,EAAE,CAAC,GAAG,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC;AAApF,QAAA,oBAAoB,wBAAgE;AAEjG,SAAsB,eAAe,CAAC,MAAc,EAAE,WAAW,GAAG,KAAK;;QACvE,MAAM,QAAQ,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC3C,MAAM,QAAQ,GAAG,IAAA,4BAAoB,EAAC,MAAM,CAAC,CAAC;QAE9C,MAAM,WAAW,GAAG,CAAC,MAAM,CAAC,CAAC;QAC7B,MAAM,SAAS,GAAG,MAAM,IAAA,+BAAkB,EAAC,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;QAC5E,IAAI,CAAC,SAAS,IAAI,WAAW,EAAE;YAC7B,MAAM,IAAA,kBAAK,EAAC,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;SAC9C;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;CAAA;AAVD,0CAUC","file":"getNewsRoles.js","sourcesContent":["import { allow, areAnyRolesAllowed } from '@Services/AccessControlService/operations';\n\nfunction getNewsResourceId(newsId: number) {\n  return `news-${newsId}`;\n}\n\nexport const getNewsEditRolePlain = (newsId: number) => `${getNewsResourceId(newsId)}-edit-role`;\n\nexport async function getNewsEditRole(newsId: number, forceUpdate = false) {\n  const resource = getNewsResourceId(newsId);\n  const editRole = getNewsEditRolePlain(newsId);\n\n  const permissions = ['edit'];\n  const isAllowed = await areAnyRolesAllowed(editRole, resource, permissions);\n  if (!isAllowed || forceUpdate) {\n    await allow(editRole, resource, permissions);\n  }\n  return editRole;\n}\n"],"sourceRoot":"../../../../../src"}