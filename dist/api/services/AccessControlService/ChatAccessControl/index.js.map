{"version":3,"sources":["../api/services/AccessControlService/ChatAccessControl/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mEAAqD;AACrD,qCAAgC;AAChC,4DAAsD;AACtD,8DAA6D;AAEtD,MAAM,iBAAiB,GAAG,CAAO,QAAgB,EAAE,GAAa,EAAE,EAAE;IACzE,MAAM,QAAQ,GAAG,MAAM,IAAA,kCAAc,EAAC,QAAQ,CAAC,CAAC;IAChD,OAAO,QAAQ,IAAI,CAAC,CAAC,CAAC,MAAM,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,GAAG,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;AACjF,CAAC,CAAA,CAAC;AAHW,QAAA,iBAAiB,qBAG5B;AAEK,MAAM,yBAAyB,GAAG,CAAO,QAAgB,EAAE,GAAa,EAAE,EAAE;IACjF,OAAO,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAChC,CAAC,CAAA,CAAC;AAFW,QAAA,yBAAyB,6BAEpC;AAEK,MAAM,2BAA2B,GAAG,CAAO,QAAgB,EAAE,OAAe,EAAE,EAAE;IACrF,MAAM,KAAK,GAAG,MAAM,eAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IACvD,IAAI,KAAK,CAAC,MAAM,KAAK,UAAU;QAAE,OAAO,IAAI,CAAC;IAC7C,OAAO,IAAA,yCAAoB,EAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACjD,CAAC,CAAA,CAAC;AAJW,QAAA,2BAA2B,+BAItC;AAEK,MAAM,yBAAyB,GAAG,CAAO,QAAgB,EAAE,OAAe,EAAE,EAAE;IACnF,OAAO,IAAA,mCAA2B,EAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACxD,CAAC,CAAA,CAAC;AAFW,QAAA,yBAAyB,6BAEpC","file":"index.js","sourcesContent":["import * as ChatService from '@Services/ChatService';\nimport { Event } from '@Models';\nimport { isClientEditor } from '../RoleAccessControl';\nimport { isAllowedToViewEvent } from '../EventAccessControl';\n\nexport const isAllowedToTalkTo = async (authorId: number, ids: number[]) => {\n  const isEditor = await isClientEditor(authorId);\n  return isEditor || !!(await ChatService.getChat('client', [...ids, authorId]));\n};\n\nexport const isAllowedToViewClientChat = async (clientId: number, ids: number[]) => {\n  return ids.includes(clientId);\n};\n\nexport const isAllowedToViewNewsroomChat = async (authorId: number, eventId: number) => {\n  const event = await Event.findByPk(Math.abs(+eventId));\n  if (event.status === 'admitted') return true;\n  return isAllowedToViewEvent(authorId, eventId);\n};\n\nexport const isAllowedToChatInNewsroom = async (authorId: number, eventId: number) => {\n  return isAllowedToViewNewsroomChat(authorId, eventId);\n};\n"],"sourceRoot":"../../../../../src"}