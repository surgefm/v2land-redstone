{"version":3,"sources":["../api/services/AgentService/ensureBotAccess.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,8EAAgE;AAChE,4DAA8C;AAC9C,2CAAmD;AAEnD,SAAsB,eAAe,CAAC,OAAe;;QACnD,MAAM,SAAS,GAAG,MAAM,IAAA,gCAAoB,GAAE,CAAC;QAE/C,MAAM,SAAS,GAAG,MAAM,oBAAoB,CAAC,oBAAoB,CAAC,SAAS,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QACzF,IAAI,SAAS;YAAE,OAAO,IAAI,CAAC;QAE3B,MAAM,WAAW,CAAC,WAAW,CAC3B,UAAU,EACV,SAAS,CAAC,EAAE,EACZ,mCAAmC,EACnC,OAAO,CACR,CAAC;QAEF,OAAO,KAAK,CAAC;IACf,CAAC;CAAA;AAdD,0CAcC","file":"ensureBotAccess.js","sourcesContent":["import * as AccessControlService from '../AccessControlService';\nimport * as ChatService from '../ChatService';\nimport { getOrCreateBotClient } from './botClient';\n\nexport async function ensureBotAccess(eventId: number): Promise<boolean> {\n  const botClient = await getOrCreateBotClient();\n\n  const hasAccess = await AccessControlService.isAllowedToEditEvent(botClient.id, eventId);\n  if (hasAccess) return true;\n\n  await ChatService.sendMessage(\n    'newsroom',\n    botClient.id,\n    '我没有编辑此时间线的权限。请在编辑室中将 @Bot 添加为编辑者。',\n    eventId,\n  );\n\n  return false;\n}\n"],"sourceRoot":"../../../../src"}