{"version":3,"sources":["../api/controllers/ClientController/getInviteCode.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,qCAAqC;AACrC,yCAAoE;AAEpE,SAAe,aAAa,CAAC,GAAoB,EAAE,GAAqB;;QACtE,IAAI,OAAO,GAAG,MAAM,oBAAU,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QACrF,IAAI,CAAA,MAAM,gCAAoB,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACzF,KAAK,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBACvC,MAAM,6BAAiB,CAAC,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aAChE;YACD,OAAO,GAAG,MAAM,oBAAU,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;SAClF;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;IACpC,CAAC;CAAA;AAED,kBAAe,aAAa,CAAC","file":"getInviteCode.js","sourcesContent":["import { RedstoneRequest, RedstoneResponse } from '@Types';\nimport { InviteCode } from '@Models';\nimport { AccessControlService, InviteCodeService } from '@Services';\n\nasync function getInviteCode(req: RedstoneRequest, res: RedstoneResponse) {\n  let invites = await InviteCode.findAll({ where: { ownerId: req.session.clientId } });\n  if (await AccessControlService.isClientEditor(req.session.clientId) && invites.length < 5) {\n    for (let i = invites.length; i < 5; i++) {\n      await InviteCodeService.createInviteCode(req.session.clientId);\n    }\n    invites = await InviteCode.findAll({ where: { ownerId: req.session.clientId } });\n  }\n  res.status(200).json({ invites });\n}\n\nexport default getInviteCode;\n"],"sourceRoot":"../../../../src"}