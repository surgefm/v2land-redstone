{"version":3,"sources":["../api/controllers/EventController/updateEvent.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,yCAAyC;AAEzC,SAAe,WAAW,CAAC,GAAoB,EAAE,GAAqB;;QACpE,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC;QAClC,MAAM,KAAK,GAAG,MAAM,wBAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAEjD,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;YACb,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,MAAM;aAChB,CAAC,CAAC;SACJ;QAED,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,EAAE;YAClD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,cAAc;aACxB,CAAC,CAAC;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,QAAQ;aAClB,CAAC,CAAC;SACJ;QAED,MAAM,CAAC,GAAG,wBAAY,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;QAEvE,IAAI,CAAC,KAAK,IAAI,EAAE;YACd,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,WAAW;gBACpB,KAAK;aACN,CAAC,CAAC;SACJ;QAED,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,OAAO,EAAE,MAAM;YACf,KAAK,EAAE,CAAC;SACT,CAAC,CAAC;IACL,CAAC;CAAA;AAED,kBAAe,WAAW,CAAC","file":"updateEvent.js","sourcesContent":["import { RedstoneRequest, RedstoneResponse } from '@Types';\nimport { EventService } from '@Services';\n\nasync function updateEvent(req: RedstoneRequest, res: RedstoneResponse) {\n  const name = req.params.eventName;\n  const event = await EventService.findEvent(name);\n\n  if (!req.body) {\n    return res.status(400).json({\n      message: '缺少参数',\n    });\n  }\n\n  if (req.body.status && !req.currentClient.isEditor) {\n    return res.status(403).json({\n      message: '你没有修改事件状态的权限',\n    });\n  }\n\n  if (!event) {\n    return res.status(404).json({\n      message: '未找到该事件',\n    });\n  }\n\n  const e = EventService.updateEvent(event, req.body, req.currentClient);\n\n  if (e === null) {\n    return res.status(200).json({\n      message: '什么变化也没有发生',\n      event,\n    });\n  }\n\n  res.status(201).json({\n    message: '修改成功',\n    event: e,\n  });\n}\n\nexport default updateEvent;\n"],"sourceRoot":"../../../../src"}