{"version":3,"sources":["../api/controllers/SearchController.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,yCAA0C;AAC1C,6DAAuD;AAEvD,SAAsB,aAAa,CAAC,GAAoB,EAAE,GAAqB;;QAC7E,MAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,OAAiB,CAAC;QAC5C,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,6BAA6B;aACvC,CAAC,CAAC;SACJ;QAED,MAAM,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC,WAAyB,CAAC;QACvD,IAAI,UAAU,KAAK,SAAS,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,0BAAU,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;YAC/E,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,OAAO,EAAE,0CAA0C;aACpD,CAAC,CAAC;SACJ;QAED,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC;QAEjC,MAAM,aAAa,GAAG,MAAM,yBAAa,CAAC,8BAA8B,CAAC,OAAO,EAC9E,UAAU,EACV,QAAQ,CAAC,IAAc,IAAI,GAAG,CAAC,EAC/B,QAAQ,CAAC,IAAc,IAAI,IAAI,CAAC,CAAC,CAAC;QACpC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,aAAa;SACvB,CAAC,CAAC;IACL,CAAC;CAAA;AAxBD,sCAwBC","file":"SearchController.js","sourcesContent":["import { RedstoneRequest, RedstoneResponse } from '@Types';\nimport { SearchService } from '@Services';\nimport { SearchType } from '../services/SearchService';\n\nexport async function keywordSearch(req: RedstoneRequest, res: RedstoneResponse) {\n  const keyword = req.query.keyword as string;\n  if (!keyword) {\n    return res.status(400).json({\n      message: 'Missing parameter: keyword.',\n    });\n  }\n\n  const searchType = req.query.search_type as SearchType;\n  if (searchType !== undefined && !Object.values(SearchType).includes(searchType)) {\n    return res.status(500).json({\n      message: 'Wrong parameter: search_type is invalid.',\n    });\n  }\n\n  const { from, size } = req.query;\n\n  const searchResults = await SearchService.keywordQueryUsingElasticsearch(keyword,\n    searchType,\n    parseInt(from as string || '0'),\n    parseInt(size as string || '20'));\n  return res.status(200).json({\n    results: searchResults,\n  });\n}\n"],"sourceRoot":"../../../src"}