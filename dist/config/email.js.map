{"version":3,"sources":["../config/email.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uDAAyC;AACzC,2CAA6B;AAC7B,oDAA0C;AAC1C,kGAAgD;AAEhD,IAAI,KAAK,GAA4C,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;AAE3E,MAAM,EACJ,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,UAAU,GACX,GAAG,OAAO,CAAC,GAAG,CAAC;AAEhB,IAAI,QAAQ,IAAI,QAAQ,EAAE;IACxB,MAAM,WAAW,GAAG,UAAU,CAAC,eAAe,CAAC;QAC7C,GAAG,EAAE,IAAI,gBAAG,CAAC;YACX,uEAAuE;YACvE,uDAAuD;YACvD,UAAU,EAAE,YAAY;YAExB,MAAM,EAAE,UAAU,IAAI,WAAW;SAClC,CAAC;QACF,WAAW,EAAE,QAAQ,IAAI,EAAE;QAC3B,IAAI,EAAE,QAAQ,IAAI,oCAAoC;QACtD,IAAI,EAAE;YACJ,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,QAAQ;SACf;KACiC,CAAC,CAAC;IAEtC,WAAW,CAAC,GAAG,CAAC,SAAS,EAAE,IAAA,uCAAG,EAAC;QAC7B,UAAU,EAAE;YACV,OAAO,EAAE;gBACP,OAAO,EAAE,CAAC,KAAa,EAAE,EAAE,CAAC,KAAK,GAAG,CAAC;gBACrC,EAAE,EAAE,UAAS,WAAgB,EAAE,OAAY;oBACzC,IAAI,WAAW,EAAE;wBACf,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;qBACzB;gBACH,CAAC;aACF;YACD,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,qBAAqB,CAAC;YAC1D,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,qBAAqB,CAAC;SAC5D;QACD,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,qBAAqB,CAAC;KACzD,CAAC,CAAC,CAAC;IAEJ,KAAK,GAAG,EAAE,WAAW,EAAE,CAAC;CACzB;AAED,kBAAe,KAAK,CAAC","file":"email.js","sourcesContent":["import * as nodemailer from 'nodemailer';\nimport * as path from 'path';\nimport { SES } from '@aws-sdk/client-ses';\nimport hbs from 'nodemailer-express-handlebars';\n\nlet email: { transporter: nodemailer.Transporter } = { transporter: null };\n\nconst {\n  SES_HOST,\n  SES_USER,\n  SES_PASS,\n  SES_RATE,\n  SES_REGION,\n} = process.env;\n\nif (SES_USER && SES_PASS) {\n  const transporter = nodemailer.createTransport({\n    SES: new SES({\n      // The key apiVersion is no longer supported in v3, and can be removed.\n      // @deprecated The client uses the \"latest\" apiVersion.\n      apiVersion: '2010-12-01',\n\n      region: SES_REGION || 'us-east-1',\n    }),\n    sendingRate: SES_RATE || 14,\n    host: SES_HOST || 'email-smtp.us-east-1.amazonaws.com',\n    auth: {\n      user: SES_USER,\n      pass: SES_PASS,\n    },\n  } as unknown as nodemailer.Transport);\n\n  transporter.use('compile', hbs({\n    viewEngine: {\n      helpers: {\n        plusOne: (index: number) => index + 1,\n        if: function(conditional: any, options: any) {\n          if (conditional) {\n            return options.fn(this);\n          }\n        },\n      },\n      layoutsDir: path.resolve(__dirname, '../assets/templates'),\n      partialsDir: path.resolve(__dirname, '../assets/templates'),\n    },\n    viewPath: path.resolve(__dirname, '../assets/templates'),\n  }));\n\n  email = { transporter };\n}\n\nexport default email;\n"],"sourceRoot":"../../src"}