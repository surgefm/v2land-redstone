{"version":3,"sources":["../config/policies.ts"],"names":[],"mappings":"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","file":"policies.js","sourcesContent":["/**\n * Policy Mappings\n *\n * Policies are simple functions which run **before** your controllers.\n * You can apply one or more policies to a given controller, or protect\n * its actions individually.\n *\n * Any policy file (e.g. `api/policies/authenticated.js`) can be accessed\n * below by its filename, minus the extension, (e.g. \"authenticated\")\n */\n\nimport {\n  hasPermission,\n  hasEventPermission,\n  hasStackPermission,\n  hasEventPermissionForSomeStatus,\n  hasRolePermission,\n  hasTagPermission,\n  hasTagParentPermission,\n} from '@Policies';\n\nexport default {\n  NewsController: {\n    'getNews': true,\n    'getNewsList': true,\n    'updateNews': ['isLoggedIn', 'isEditor'],\n    'getAllPendingNews': ['isLoggedIn', 'isEditor'],\n    '*': false,\n  },\n\n  EventController: {\n    'addNews': ['isLoggedIn', 'isEditor'],\n    'findEvent': true,\n    'getEvent': hasEventPermissionForSomeStatus('用户没有查看事件的权限'),\n    'createEvent': ['isLoggedIn'],\n    'updateEvent': ['isLoggedIn', hasEventPermission('edit', '用户没有编辑事件的权限')],\n    'getEventList': true,\n    'getAllPendingEvents': ['isLoggedIn', 'isEditor'],\n    'getPendingNews': ['isLoggedIn', hasPermission('news', 'edit', '用户没有编辑新闻的权限')],\n    'createStack': ['isLoggedIn', hasEventPermission('edit', '用户没有编辑事件的权限')],\n    'createNews': ['isLoggedIn', hasEventPermission('edit', '用户没有创建新闻的权限')],\n    'updateHeaderImage': ['isLoggedIn', hasEventPermission('edit', '用户没有编辑事件的权限')],\n    'addTag': ['isLoggedIn', hasPermission('tags', 'add', '用户没有添加标签的权限')],\n    'removeTag': ['isLoggedIn', hasPermission('tags', 'remove', '用户没有移除标签的权限')],\n    'makeCommit': ['isLoggedIn', hasEventPermission('edit', '用户没有编辑事件的权限')],\n    'forkEvent': ['isLoggedIn', hasPermission('events', 'create', '用户没有复制事件的权限')],\n    'notifySubscriber': ['isLoggedIn', hasEventPermission('edit', '用户没有编辑事件的权限')],\n    'star': ['isLoggedIn'],\n    'unstar': ['isLoggedIn'],\n    'getStars': true,\n    '*': false,\n  },\n\n  StackController: {\n    'getStack': true,\n    'getStackList': true,\n    'updateStack': ['isLoggedIn', hasStackPermission('edit', '用户没有编辑事件的权限')],\n    'updateMultipleStacks': ['isLoggedIn', hasStackPermission('edit', '用户没有编辑事件的权限')],\n    'addEvent': ['isLoggedIn', hasStackPermission('edit', '用户没有编辑事件的权限')],\n    'removeEvent': ['isLoggedIn', hasStackPermission('edit', '用户没有编辑事件的权限')],\n    '*': false,\n  },\n\n  ClientController: {\n    'inviteCode': true,\n    'updateClient': ['isLoggedIn'],\n    'findClient': true,\n    'login': true,\n    'register': true,\n    'verifyToken': true,\n    'changePassword': 'isLoggedIn',\n    'updateRole': ['isLoggedIn', 'isAdmin'],\n    'getClientList': 'isLoggedIn',\n    'getClientDetail': 'isLoggedIn',\n    'logout': 'isLoggedIn',\n    'getInviteCode': 'isLoggedIn',\n    '*': false,\n  },\n\n  SubscriptionController: {\n    'removeContact': true,\n    'unsubscribe': true,\n    'subscribe': true,\n    'pwaSubscribe': true,\n    '*': false,\n  },\n\n  HeaderImageController: {\n    '*': false,\n  },\n\n  AuthController: {\n    'options': true,\n    'authorize': true,\n    'unauthorize': true,\n    'twitter': true,\n    'twitterRedirect': true,\n    'twitterCallback': true,\n    'weibo': true,\n    'weiboRedirect': true,\n    'weiboCallback': true,\n    'google': true,\n    'googleRedirect': true,\n    'googleCallback': true,\n    'telegramRedirect': true,\n    'appleRedirect': true,\n    '*': false,\n  },\n\n  OAuth2Controller: {\n    '*': true,\n  },\n\n  UploadController: {\n    'upload': ['isLoggedIn', 'uploadFile'],\n    '*': false,\n  },\n\n  SearchController: {\n    'keywordSearch': true,\n    '*': false,\n  },\n\n  TagController: {\n    'createTag': ['isLoggedIn'],\n    'updateTag': ['isLoggedIn', hasTagPermission('edit', '用户没有更改该话题的权限')],\n    'getTag': true,\n    'getTagList': true,\n    'getTagListByAlphabet': true,\n    'getTagListStats': true,\n    'addCurator': ['isLoggedIn', hasTagParentPermission('edit', '用户没有给该话题添加主持人的权限')],\n    'addCuration': ['isLoggedIn', hasTagPermission('edit', '用户没有更改该话题的权限')],\n    'removeCurator': ['isLoggedIn', hasTagParentPermission('edit', '用户没有给该话题添加主持人的权限')],\n    '*': false,\n  },\n\n  RoleController: {\n    'getClientRoles': ['isLoggedIn', hasRolePermission('view', '用户没有查看请求的用户信息的权限')],\n    'checkPermissionOnResource': ['isLoggedIn', hasRolePermission('view', '用户没有查看请求的用户信息的权限')],\n    'updateClientRole': ['isLoggedIn', hasRolePermission('edit', '用户没有更改请求的用户信息的权限')],\n    'updateClientPermission': ['isLoggedIn', hasRolePermission('edit', '用户没有更改请求的用户信息的权限')],\n  },\n\n  ChatController: {\n    'getPopularChatrooms': true,\n    'getClientChatrooms': ['isLoggedIn'],\n    'loadChatMessages': ['isLoggedIn'],\n  },\n\n  ExtractionController: {\n    'extract': ['isLoggedIn'],\n  },\n\n} as { [index: string]: { [index: string]: boolean | string | string[] | object } };\n"],"sourceRoot":"../../src"}